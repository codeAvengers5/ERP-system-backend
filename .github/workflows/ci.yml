name: CI

on:
  push:
    branches:
      - main

jobs:
  docker:
    runs-on: ubuntu-latest
    container:
      image: edlawitg/code_avengers:erp-backend

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: Install dependencies
        run: npm install
      - name: Install Docker Compose
        run: |
         apt-get update
         apt-get install docker-compose
      - name: Build service s
        run: docker-compose up -d

      - name: List container
        run: docker-compose ps

      - name: Build docker
        run: |
          echo ---Building and starting up docker---
          docker-compose up -f "docker-compose.yml" up -d --build
          echo ---Containers up---
      # - name: Run Docker container
      #   run: docker run -d -p 8000:8000 --name eprsystemformekedoina eprsystemformekedoina-erp_backend:latest
